import{n as c,_ as i}from"../build.js";const s={props:{},components:{SectionWithPrint:()=>i(()=>import("./SectionWithPrint-Ds0UU0Au.js"),[]),AgoraExport:()=>i(()=>import("./AgoraExport-CsUEbJCQ.js"),[]),EditionExport:()=>i(()=>import("./EditionExport-CRqVdbKQ.js"),[])},data(){return{collection:null,fetch_collection_error:null,is_fullscreen:!1,is_serversidepreview:!1}},i18n:{messages:{fr:{fetch_collection_error:"Erreur lors du fetch de la collection",collection_is_not_public:"Cette collection n'est pas publique, veuillez cocher la case qui s'affiche dans la fenÃªtre de partage."}}},created(){console.log("Loading collectionView")},async mounted(){var e,t,r;((e=this.$route.query)==null?void 0:e.make_preview)==="true"&&(this.is_serversidepreview=!0);let o;(t=this.$route.query)!=null&&t.sat&&(o=this.$route.query.sat),(r=this.$route.query)!=null&&r.superadmintoken&&(o=this.$route.query.superadmintoken),this.collection=await this.$api.getPublicFolder({path:this.collection_path,superadmintoken:o}).catch(l=>{l.code==="folder_not_public"?this.fetch_collection_error=this.$t("collection_is_not_public"):this.fetch_collection_error=this.$t("fetch_collection_error"),this.$root.is_loading=!1}),this.$root.is_loading=!1},beforeDestroy(){},watch:{is_fullscreen(){}},computed:{collection_path(){return`publications/${this.$route.params.document_slug}`}},methods:{}};var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"_collectionView",class:{"is--serversidepreview":e.is_serversidepreview}},[t("transition",{attrs:{name:"fade_fast",mode:"out-in"}},[e.$root.is_loading?t("div",{key:"loader",staticClass:"u-divCentered"},[t("LoaderSpinner")],1):e.fetch_collection_error?t("div",{staticClass:"u-divCentered"},[e._v(" "+e._s(e.fetch_collection_error)+" ")]):t("div",{key:"collection",ref:"fsContainer"},[!e.collection.template||e.collection.template==="story_with_sections"?t("div",[t("SectionWithPrint",{attrs:{publication:e.collection}})],1):e.collection.template==="agora"?t("AgoraExport",{attrs:{publication:e.collection}}):e.collection.template==="edition"?t("EditionExport",{attrs:{publication:e.collection}}):e._e()],1)])],1)},a=[],_=c(s,n,a,!1,null,"862de5a8");const d=_.exports;export{d as default};
